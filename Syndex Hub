local SyndexHubv2 = Instance.new("ScreenGui")
local mainframe = Instance.new("Frame")
local Minimise = Instance.new("TextButton")
local Main = Instance.new("TextButton")
local MainFrame = Instance.new("Frame")
local Speed = Instance.new("TextButton")
local Fly = Instance.new("TextButton")
local TP = Instance.new("TextButton")
local ResetCharacter = Instance.new("TextButton")
local InfJump = Instance.new("TextButton")
local Jump = Instance.new("TextButton")
local SpeedValue = Instance.new("TextBox")
local JumpValue = Instance.new("TextBox")
local PlayerName = Instance.new("TextBox")
local You = Instance.new("TextLabel")
local Others = Instance.new("TextLabel")
local TP_2 = Instance.new("TextButton")
local Hub = Instance.new("TextButton")
local HubFrame = Instance.new("Frame")
local SyndexAxeDupe = Instance.new("TextButton")
local Credits = Instance.new("TextButton")
local CreditsFrame = Instance.new("Frame")
local MadeBy = Instance.new("TextLabel")
local SyndexCorporation = Instance.new("TextLabel")
local Credits_2 = Instance.new("TextLabel")
local AnimeCheat = Instance.new("TextLabel")
local Syndex = Instance.new("TextLabel")
local Close = Instance.new("TextButton")
local Name = Instance.new("TextLabel")
local openbutton = Instance.new("TextButton")

local GUI = nil

SyndexHubv2.Name = "Syndex Hub Version 2"
SyndexHubv2.Parent = game.CoreGui

game.Lighting.GlobalShadows = false

mainframe.Name = "mainframe"
mainframe.Parent = SyndexHubv2
mainframe.BackgroundColor3 = Color3.fromRGB(0,0,0)
mainframe.BorderColor3 = Color3.fromRGB(255, 255, 255)
mainframe.BorderSizePixel = 0
mainframe.Position = UDim2.new(0.202159837, 0, 0.372229487, 0)
mainframe.Size = UDim2.new(0, 400, 0, 280)
mainframe.Visible = false

Minimise.Name = "Minimise"
Minimise.Parent = mainframe
Minimise.BackgroundColor3 = Color3.fromRGB(0,0,0)
Minimise.BorderColor3 = Color3.fromRGB(0,0,0)
Minimise.BorderSizePixel = 0
Minimise.Position = UDim2.new(0.800000012, 0, 0, 0)
Minimise.Size = UDim2.new(0, 40, 0, 40)
Minimise.Font = Enum.Font.SciFi
Minimise.Text = "-"
Minimise.TextColor3 = Color3.fromRGB(255, 255, 255)
Minimise.TextSize = 35.000
Minimise.TextWrapped = true
Minimise.MouseButton1Down:connect(function()
	openbutton.Visible = true
	mainframe.Visible = false
end)

Close.Name = "Close"
Close.Parent = mainframe
Close.BackgroundColor3 = Color3.fromRGB(0,0,0)
Close.BorderColor3 = Color3.fromRGB(0,0,0)
Close.BorderSizePixel = 0
Close.Position = UDim2.new(0.899469852, 0, 0, 0)
Close.Size = UDim2.new(0, 40, 0, 40)
Close.Font = Enum.Font.SciFi
Close.Text = "X"
Close.TextColor3 = Color3.fromRGB(255, 255, 255)
Close.TextSize = 35.000
Close.TextWrapped = true
Close.MouseButton1Down:connect(function()
	SyndexHubv2:Destroy()
	GUI:Destroy()
end)

openbutton.Name = "openbutton"
openbutton.Parent = SyndexHubv2
openbutton.BackgroundColor3 = Color3.fromRGB(0,0,0)
openbutton.BorderColor3 = Color3.fromRGB(0,0,0)
openbutton.BorderSizePixel = 0
openbutton.Position = UDim2.new(0.850947857, 0, 0.935937285, 0)
openbutton.Size = UDim2.new(0, 100, 0, 30)
openbutton.Font = Enum.Font.SciFi
openbutton.Text = "Launch"
openbutton.TextColor3 = Color3.fromRGB(255, 255, 255)
openbutton.TextSize = 32.000
openbutton.MouseButton1Down:connect(function()
	mainframe.Visible = true
	openbutton.Visible = false
end)

Main.Name = "Main"
Main.Parent = mainframe
Main.BackgroundColor3 = Color3.fromRGB(0,0,0)
Main.BorderColor3 = Color3.fromRGB(0,0,0)
Main.BorderSizePixel = 0
Main.Size = UDim2.new(0, 80, 0, 40)
Main.Font = Enum.Font.SciFi
Main.Text = "Main"
Main.TextColor3 = Color3.fromRGB(255, 255, 255)
Main.TextScaled = true
Main.TextSize = 32.000
Main.TextWrapped = true
Main.MouseButton1Down:connect(function()
	CreditsFrame.Visible = false
	HubFrame.Visible = false
	MainFrame.Visible = true
end)

MainFrame.Name = "MainFrame"
MainFrame.Parent = Main
MainFrame.BackgroundColor3 = Color3.fromRGB(0,0,0)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(1, 0, 1, 0)
MainFrame.Size = UDim2.new(0, 320, 0, 240)
MainFrame.Visible = false

Speed.Name = "Speed"
Speed.Parent = MainFrame
Speed.BackgroundColor3 = Color3.fromRGB(0,0,0)
Speed.BorderSizePixel = 0
Speed.Position = UDim2.new(0.0199999809, 0, 0.0250000004, 0)
Speed.Size = UDim2.new(0, 76, 0, 52)
Speed.Font = Enum.Font.SciFi
Speed.Text = "Speed"
Speed.TextColor3 = Color3.fromRGB(255, 255, 255)
Speed.TextScaled = true
Speed.TextSize = 14.000
Speed.TextStrokeColor3 = Color3.fromRGB(255, 255, 255)
Speed.TextWrapped = true

--Flying works in Vehicle now
Fly.Name = "Fly"
Fly.Parent = MainFrame
Fly.BackgroundColor3 = Color3.fromRGB(0,0,0)
Fly.BorderSizePixel = 0
Fly.Position = UDim2.new(0.0199999996, 0, 0.270000011, 0)
Fly.Size = UDim2.new(0, 73, 0, 52)
Fly.Font = Enum.Font.SciFi
Fly.Text = "Fly"
Fly.TextColor3 = Color3.fromRGB(255, 255, 255)
Fly.TextScaled = true
Fly.TextSize = 14.000
Fly.TextStrokeColor3 = Color3.fromRGB(255, 255, 255)
Fly.TextWrapped = true

TP.Name = "TP"
TP.Parent = MainFrame
TP.BackgroundColor3 = Color3.fromRGB(0,0,0)
TP.BorderSizePixel = 0
TP.Position = UDim2.new(0.0199999996, 0, 0.514999986, 0)
TP.Size = UDim2.new(0, 73, 0, 52)
TP.Font = Enum.Font.SciFi
TP.Text = "TP and Collisions"
TP.TextColor3 = Color3.fromRGB(255, 255, 255)
TP.TextScaled = true
TP.TextSize = 14.000
TP.TextStrokeColor3 = Color3.fromRGB(255, 255, 255)
TP.TextWrapped = true

ResetCharacter.Name = "ResetCharacter"
ResetCharacter.Parent = MainFrame
ResetCharacter.BackgroundColor3 = Color3.fromRGB(0,0,0)
ResetCharacter.BorderSizePixel = 0
ResetCharacter.Position = UDim2.new(0.753000021, 0, 0.757000029, 0)
ResetCharacter.Size = UDim2.new(0, 73, 0, 52)
ResetCharacter.Font = Enum.Font.SciFi
ResetCharacter.Text = "Reset Character"
ResetCharacter.TextColor3 = Color3.fromRGB(255, 255, 255)
ResetCharacter.TextScaled = true
ResetCharacter.TextSize = 14.000
ResetCharacter.TextStrokeColor3 = Color3.fromRGB(255, 255, 255)
ResetCharacter.TextWrapped = true

InfJump.Name = "InfJump"
InfJump.Parent = MainFrame
InfJump.BackgroundColor3 = Color3.fromRGB(0,0,0)
InfJump.BorderSizePixel = 0
InfJump.Position = UDim2.new(0.504999995, 0, 0.270000011, 0)
InfJump.Size = UDim2.new(0, 73, 0, 52)
InfJump.Font = Enum.Font.SciFi
InfJump.Text = "Infinite Jump"
InfJump.TextColor3 = Color3.fromRGB(255, 255, 255)
InfJump.TextScaled = true
InfJump.TextSize = 14.000
InfJump.TextStrokeColor3 = Color3.fromRGB(255, 255, 255)
InfJump.TextWrapped = true

Jump.Name = "Jump"
Jump.Parent = MainFrame
Jump.BackgroundColor3 = Color3.fromRGB(0,0,0)
Jump.BorderSizePixel = 0
Jump.Position = UDim2.new(0.504999995, 0, 0.0250000004, 0)
Jump.Size = UDim2.new(0, 76, 0, 52)
Jump.Font = Enum.Font.SciFi
Jump.Text = "Jump"
Jump.TextColor3 = Color3.fromRGB(255, 255, 255)
Jump.TextScaled = true
Jump.TextSize = 14.000
Jump.TextStrokeColor3 = Color3.fromRGB(255, 255, 255)
Jump.TextWrapped = true

SpeedValue.Name = "SpeedValue"
SpeedValue.Parent = MainFrame
SpeedValue.BackgroundColor3 = Color3.fromRGB(0,0,0)
SpeedValue.BorderSizePixel = 0
SpeedValue.Position = UDim2.new(0.257499993, 0, 0.0250000004, 0)
SpeedValue.Size = UDim2.new(0, 76, 0, 52)
SpeedValue.Font = Enum.Font.SciFi
SpeedValue.PlaceholderColor3 = Color3.fromRGB(255, 255, 255)
SpeedValue.PlaceholderText = "16"
SpeedValue.Text = ""
SpeedValue.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedValue.TextScaled = true
SpeedValue.TextSize = 14.000
SpeedValue.TextWrapped = true

JumpValue.Name = "JumpValue"
JumpValue.Parent = MainFrame
JumpValue.BackgroundColor3 = Color3.fromRGB(0,0,0)
JumpValue.BorderSizePixel = 0
JumpValue.Position = UDim2.new(0.742500007, 0, 0.0250000004, 0)
JumpValue.Size = UDim2.new(0, 76, 0, 52)
JumpValue.Font = Enum.Font.SciFi
JumpValue.PlaceholderColor3 = Color3.fromRGB(255, 255, 255)
JumpValue.PlaceholderText = "50"
JumpValue.Text = ""
JumpValue.TextColor3 = Color3.fromRGB(255, 255, 255)
JumpValue.TextScaled = true
JumpValue.TextSize = 14.000
JumpValue.TextWrapped = true

PlayerName.Name = "PlayerName"
PlayerName.Parent = PlotFrame
PlayerName.BackgroundColor3 = Color3.fromRGB(0,0,0)
PlayerName.BorderSizePixel = 0
PlayerName.Position = UDim2.new(0.508000016, 0, 0.270000011, 0)
PlayerName.Size = UDim2.new(0, 151, 0, 52)
PlayerName.Font = Enum.Font.SciFi
PlayerName.PlaceholderColor3 = Color3.fromRGB(255, 255, 255)
PlayerName.PlaceholderText = "Player Name?"
PlayerName.Text = ""
PlayerName.TextColor3 = Color3.fromRGB(255, 255, 255)
PlayerName.TextScaled = true
PlayerName.TextSize = 14.000
PlayerName.TextWrapped = true

You.Name = "You"
You.Parent = PlotFrame
You.BackgroundColor3 = Color3.fromRGB(0,0,0)
You.BorderSizePixel = 0
You.Position = UDim2.new(0.0199999996, 0, 0.0250000004, 0)
You.Size = UDim2.new(0, 151, 0, 52)
You.Font = Enum.Font.SciFi
You.Text = "You"
You.TextColor3 = Color3.fromRGB(255, 255, 255)
You.TextScaled = true
You.TextSize = 14.000
You.TextWrapped = true


Hub.MouseButton1Down:connect(function()
	CreditsFrame.Visible = false
	HubFrame.Visible = true
	MainFrame.Visible = false
end)

HubFrame.Name = "HubFrame"
HubFrame.Parent = Hub
HubFrame.BackgroundColor3 = Color3.fromRGB(0,0,0)
HubFrame.BorderSizePixel = 0
HubFrame.Position = UDim2.new(1, 0, -4.00400019, 0)
HubFrame.Size = UDim2.new(0, 320, 0, 240)
HubFrame.Visible = false

Credits.Name = "Credits"
Credits.Parent = mainframe
Credits.BackgroundColor3 = Color3.fromRGB(0,0,0)
Credits.BorderColor3 = Color3.fromRGB(0,0,0)
Credits.BorderSizePixel = 0
Credits.Position = UDim2.new(0, 0, 0.85799998, 0)
Credits.Size = UDim2.new(0, 80, 0, 40)
Credits.Font = Enum.Font.SciFi
Credits.Text = "Credits"
Credits.TextColor3 = Color3.fromRGB(255, 255, 255)
Credits.TextScaled = true
Credits.TextSize = 32.000
Credits.TextWrapped = true
Credits.MouseButton1Down:connect(function()
	CreditsFrame.Visible = true
	DupeFrame.Visible = false
	HubFrame.Visible = false
	MainFrame.Visible = false
	PlotFrame.Visible = false
	TPFrame.Visible = false
	WoodFrame.Visible = false
end)

CreditsFrame.Name = "CreditsFrame"
CreditsFrame.Parent = Credits
CreditsFrame.BackgroundColor3 = Color3.fromRGB(0,0,0)
CreditsFrame.BorderSizePixel = 0
CreditsFrame.Position = UDim2.new(1, 0, -5.00599957, 0)
CreditsFrame.Size = UDim2.new(0, 320, 0, 240)

MadeBy.Name = "Made By"
MadeBy.Parent = CreditsFrame
MadeBy.BackgroundColor3 = Color3.fromRGB(0,0,0)
MadeBy.BackgroundTransparency = 100.000
MadeBy.BorderSizePixel = 0
MadeBy.Position = UDim2.new(0.159374997, 0, 0, 0)
MadeBy.Size = UDim2.new(0, 200, 0, 48)
MadeBy.Font = Enum.Font.GothamBold
MadeBy.Text = "Made By"
MadeBy.TextColor3 = Color3.fromRGB(255, 255, 255)
MadeBy.TextScaled = true
MadeBy.TextSize = 13.000
MadeBy.TextWrapped = true

SyndexCorporation.Name = "SyndexCorporation"
SyndexCorporation.Parent = CreditsFrame
SyndexCorporation.BackgroundColor3 = Color3.fromRGB(0,0,0)
SyndexCorporation.BackgroundTransparency = 100.000
SyndexCorporation.BorderSizePixel = 0
SyndexCorporation.Position = UDim2.new(0, 0, 0.19600004, 0)
SyndexCorporation.Size = UDim2.new(0, 320, 0, 48)
SyndexCorporation.Font = Enum.Font.GothamBold
SyndexCorporation.Text = "DanoDoe"
SyndexCorporation.TextColor3 = Color3.fromRGB(255, 255, 255)
SyndexCorporation.TextSize = 27.000
SyndexCorporation.TextWrapped = true

Credits_2.Name = "Credits"
Credits_2.Parent = CreditsFrame
Credits_2.BackgroundColor3 = Color3.fromRGB(0,0,0)
Credits_2.BackgroundTransparency = 100.000
Credits_2.BorderSizePixel = 0
Credits_2.Position = UDim2.new(0.159374997, 0, 0.40016669, 0)
Credits_2.Size = UDim2.new(0, 200, 0, 48)
Credits_2.Font = Enum.Font.GothamBold
Credits_2.Text = "Credits"
Credits_2.TextColor3 = Color3.fromRGB(255, 255, 255)
Credits_2.TextScaled = true
Credits_2.TextSize = 13.000
Credits_2.TextWrapped = true

AnimeCheat.Name = "Syndex Core"
AnimeCheat.Parent = CreditsFrame
AnimeCheat.BackgroundColor3 = Color3.fromRGB(0,0,0)
AnimeCheat.BackgroundTransparency = 100.000
AnimeCheat.BorderSizePixel = 0
AnimeCheat.Position = UDim2.new(0, 0, 0.596000135, 0)
AnimeCheat.Size = UDim2.new(0, 160, 0, 48)
AnimeCheat.Font = Enum.Font.GothamBold
AnimeCheat.Text = "DanoDoe"
AnimeCheat.TextColor3 = Color3.fromRGB(255, 255, 255)
AnimeCheat.TextSize = 26.000
AnimeCheat.TextWrapped = true

Name.Name = "Name"
Name.Parent = mainframe
Name.BackgroundColor3 = Color3.fromRGB(0,0,0)
Name.BorderSizePixel = 0
Name.Position = UDim2.new(0.200000003, 0, 0, 0)
Name.Size = UDim2.new(0, 240, 0, 40)
Name.Font = Enum.Font.SciFi
Name.Text = "Syndex Hub Version 2"
Name.TextColor3 = Color3.fromRGB(255, 255, 255)
Name.TextScaled = true
Name.TextSize = 14.000
Name.TextWrapped = true

local function QMMS_fake_script() -- mainframe.LocalScript 
	local script = Instance.new('LocalScript', mainframe)

	script.parent.Selectable = true
	script.Parent.Active = true
	script.parent.Draggable = true
end
coroutine.wrap(QMMS_fake_script)()

-- Objects

local MainFrame = Instance.new("Frame")

-- Properties

MainFrame.Name = "SyndexAxeHandler"
MainFrame.Parent = HubFrame
MainFrame.BackgroundColor3 = Color3.new(0, 0, 0)
MainFrame.BackgroundTransparency = 1
MainFrame.BorderColor3 = Color3.new(0, 0, 0)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0, 0, 0, 0)
MainFrame.Size = UDim2.new(0, 275, 0, 220)
MainFrame.Active = true

local function SendNotification(title,text,duration,...)
	game.StarterGui:SetCore("SendNotification", {
		Title = title;
		Text = text;
		Icon = "";
		Duration = duration;
	})
end

--Join Detecter

game.Players.ChildAdded:Connect(function(player)
	if not pcall (function()
			SendNotification(player.Name.." has joined the server.",4 )
		end) then
		print ("Error")
	end
end)

--Leave Detecter

game.Players.ChildRemoved:Connect(function(player)
	if not pcall (function()
			SendNotification(player.Name.." has left the server.",4 )
		end) then
		print ("Error")
	end
end)

SendNotification("Loaded","Join and leave detector is loaded",2)

--Walkspeed

Speed.MouseButton1Down:connect(function()
	while true do
		wait()
		game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = SpeedValue.Text
	end
end)

--Jumppower

Jump.MouseButton1Down:connect(function()
	while true do
		wait()
		game.Players.LocalPlayer.Character.Humanoid.JumpPower = JumpValue.Text
	end
end)

--Fly

local toggle = false
local ps = false

Fly.MouseButton1Click:Connect(function()
	toggle = not toggle
	Fly.TextColor3 = (toggle and Color3.fromRGB(255,0,0) or Color3.fromRGB(255,255,255))
	if toggle then
		flying = not flying
		repeat wait()
		until game.Players.LocalPlayer and game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:findFirstChild("Torso") and game.Players.LocalPlayer.Character:findFirstChild("Humanoid")
		local mouse = game.Players.LocalPlayer:GetMouse()
		repeat wait() until mouse
		local plr = game.Players.LocalPlayer
		local torso = plr.Character.Torso
		if torso.Parent.Humanoid.Sit == true then
			ps = false
		else
			ps = true	
		end	
		local deb = true
		local ctrl = {f = 0, b = 0, l = 0, r = 0}
		local lastctrl = {f = 0, b = 0, l = 0, r = 0}
		local maxspeed = 200
		local speed = 0
		if flying then
		end

		function FlyFunction()
			local bg = Instance.new("BodyGyro", torso)
			bg.P = 9e4
			bg.maxTorque = Vector3.new(9e9, 9e9, 9e9)
			bg.cframe = torso.CFrame
			local bv = Instance.new("BodyVelocity", torso)
			bv.velocity = Vector3.new(0,0.1,0)
			bv.maxForce = Vector3.new(9e9, 9e9, 9e9)
			repeat wait()
				plr.Character.Humanoid.PlatformStand = ps
				if ctrl.l + ctrl.r ~= 0 or ctrl.f + ctrl.b ~= 0 then
					speed = speed+.5+(speed/maxspeed)
					if speed > maxspeed then
						speed = maxspeed
					end
				elseif not (ctrl.l + ctrl.r ~= 0 or ctrl.f + ctrl.b ~= 0) and speed ~= 0 then
					speed = speed-1
					if speed < 0 then
						speed = 0
					end
				end
				if (ctrl.l + ctrl.r) ~= 0 or (ctrl.f + ctrl.b) ~= 0 then
					bv.velocity = ((game.Workspace.CurrentCamera.CoordinateFrame.lookVector * (ctrl.f+ctrl.b)) + ((game.Workspace.CurrentCamera.CoordinateFrame * CFrame.new(ctrl.l+ctrl.r,(ctrl.f+ctrl.b)*.2,0).p) - game.Workspace.CurrentCamera.CoordinateFrame.p))*speed
					lastctrl = {f = ctrl.f, b = ctrl.b, l = ctrl.l, r = ctrl.r}
				elseif (ctrl.l + ctrl.r) == 0 and (ctrl.f + ctrl.b) == 0 and speed ~= 0 then
					bv.velocity = ((game.Workspace.CurrentCamera.CoordinateFrame.lookVector * (lastctrl.f+lastctrl.b)) + ((game.Workspace.CurrentCamera.CoordinateFrame * CFrame.new(lastctrl.l+lastctrl.r,(lastctrl.f+lastctrl.b)*.2,0).p) - game.Workspace.CurrentCamera.CoordinateFrame.p))*speed
				else
					bv.velocity = Vector3.new(0,0.1,0)
				end
				bg.cframe = game.Workspace.CurrentCamera.CoordinateFrame * CFrame.Angles(-math.rad((ctrl.f+ctrl.b)*50*speed/maxspeed),0,0)
			until not flying
			ctrl = {f = 0, b = 0, l = 0, r = 0}
			lastctrl = {f = 0, b = 0, l = 0, r = 0}
			speed = 0
			bg:Destroy()
			bv:Destroy()
			plr.Character.Humanoid.PlatformStand = false
		end
		mouse.KeyDown:connect(function(key)
			if key:lower() == "w" then
				ctrl.f = 1
			elseif key:lower() == "s" then
				ctrl.b = -1
			elseif key:lower() == "a" then
				ctrl.l = -1
			elseif key:lower() == "d" then
				ctrl.r = 1

			end
		end)
		mouse.KeyUp:connect(function(key)
			if key:lower() == "w" then
				ctrl.f = 0
			elseif key:lower() == "s" then
				ctrl.b = 0
			elseif key:lower() == "a" then
				ctrl.l = 0
			elseif key:lower() == "d" then
				ctrl.r = 0
			end
		end)
		FlyFunction()
	else
		flying = not flying
		repeat wait()
		until game.Players.LocalPlayer and game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:findFirstChild("Torso") and game.Players.LocalPlayer.Character:findFirstChild("Humanoid")
		local mouse = game.Players.LocalPlayer:GetMouse()
		repeat wait() until mouse
		local plr = game.Players.LocalPlayer
		local torso = plr.Character.Torso
				if torso.Parent.Humanoid.Sit == true then
			ps = false
		else
			ps = true	
		end	
		local deb = true
		local ctrl = {f = 0, b = 0, l = 0, r = 0}
		local lastctrl = {f = 0, b = 0, l = 0, r = 0}
		local maxspeed = 200
		local speed = 0
		if flying then
		end

		function FlyFunction()
			local bg = Instance.new("BodyGyro", torso)
			bg.P = 9e4
			bg.maxTorque = Vector3.new(9e9, 9e9, 9e9)
			bg.cframe = torso.CFrame
			local bv = Instance.new("BodyVelocity", torso)
			bv.velocity = Vector3.new(0,0.1,0)
			bv.maxForce = Vector3.new(9e9, 9e9, 9e9)
			repeat wait()
				plr.Character.Humanoid.PlatformStand = ps
				if ctrl.l + ctrl.r ~= 0 or ctrl.f + ctrl.b ~= 0 then
					speed = speed+.5+(speed/maxspeed)
					if speed > maxspeed then
						speed = maxspeed
					end
				elseif not (ctrl.l + ctrl.r ~= 0 or ctrl.f + ctrl.b ~= 0) and speed ~= 0 then
					speed = speed-1
					if speed < 0 then
						speed = 0
					end
				end
				if (ctrl.l + ctrl.r) ~= 0 or (ctrl.f + ctrl.b) ~= 0 then
					bv.velocity = ((game.Workspace.CurrentCamera.CoordinateFrame.lookVector * (ctrl.f+ctrl.b)) + ((game.Workspace.CurrentCamera.CoordinateFrame * CFrame.new(ctrl.l+ctrl.r,(ctrl.f+ctrl.b)*.2,0).p) - game.Workspace.CurrentCamera.CoordinateFrame.p))*speed
					lastctrl = {f = ctrl.f, b = ctrl.b, l = ctrl.l, r = ctrl.r}
				elseif (ctrl.l + ctrl.r) == 0 and (ctrl.f + ctrl.b) == 0 and speed ~= 0 then
					bv.velocity = ((game.Workspace.CurrentCamera.CoordinateFrame.lookVector * (lastctrl.f+lastctrl.b)) + ((game.Workspace.CurrentCamera.CoordinateFrame * CFrame.new(lastctrl.l+lastctrl.r,(lastctrl.f+lastctrl.b)*.2,0).p) - game.Workspace.CurrentCamera.CoordinateFrame.p))*speed
				else
					bv.velocity = Vector3.new(0,0.1,0)
				end
				bg.cframe = game.Workspace.CurrentCamera.CoordinateFrame * CFrame.Angles(-math.rad((ctrl.f+ctrl.b)*50*speed/maxspeed),0,0)
			until not flying
			ctrl = {f = 0, b = 0, l = 0, r = 0}
			lastctrl = {f = 0, b = 0, l = 0, r = 0}
			speed = 0
			bg:Destroy()
			bv:Destroy()
			plr.Character.Humanoid.PlatformStand = false
		end
		mouse.KeyDown:connect(function(key)
			if key:lower() == "w" then
				ctrl.f = 1
			elseif key:lower() == "s" then
				ctrl.b = -1
			elseif key:lower() == "a" then
				ctrl.l = -1
			elseif key:lower() == "d" then
				ctrl.r = 1

			end
		end)
		mouse.KeyUp:connect(function(key)
			if key:lower() == "w" then
				ctrl.f = 0
			elseif key:lower() == "s" then
				ctrl.b = 0
			elseif key:lower() == "a" then
				ctrl.l = 0
			elseif key:lower() == "d" then
				ctrl.r = 0
			end
		end)
		FlyFunction()
	end
end)

--Infinite Jump

local toggle = false
InfJump.MouseButton1Click:Connect(function()
	toggle = not toggle
	InfJump.TextColor3 = (toggle and Color3.fromRGB(85, 255, 127) or Color3.fromRGB(255,255,255))
	if toggle then
		InfiniteJumpEnabled = true
		game:GetService("UserInputService").JumpRequest:connect(function()
			if InfiniteJumpEnabled then
				game:GetService"Players".LocalPlayer.Character:FindFirstChildOfClass'Humanoid':ChangeState("Jumping")
				InfiniteJumpEnabled = true
			end
		end)

	else
		InfiniteJumpEnabled = false
		game:GetService("UserInputService").JumpRequest:connect(function()
			if InfiniteJumpEnabled then
				game:GetService"Players".LocalPlayer.Character:FindFirstChildOfClass'Humanoid':ChangeState("Jumping")

			end
		end)
	end
end)

TP.MouseButton1Down:connect(function()
	local UIS = game:GetService("UserInputService")

	local Player = game.Players.LocalPlayer
	local Mouse = Player:GetMouse()


	function GetCharacter()
		return game.Players.LocalPlayer.Character
	end

	function Teleport(pos)
		local Char = GetCharacter()
		if Char then
			Char:MoveTo(pos)
		end
	end


	UIS.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 and UIS:IsKeyDown(Enum.KeyCode.LeftControl) then
			Teleport(Mouse.Hit.p)
			
		end
		if input.UserInputType == Enum.UserInputType.MouseButton1 and UIS:IsKeyDown(Enum.KeyCode.RightControl) then
			
			if Mouse.Target then
				if Mouse.Target:IsA("Part") or Mouse.Target:IsA("BasePart") then
					if Mouse.Target.CanCollide == false then	
						Mouse.Target.CanCollide = true
						return
					else
						Mouse.Target.CanCollide = false
						return	
					end
				end
			end
		end
	end)
end)

--Reset Character

ResetCharacter.MouseButton1Click:connect(function()

	game.Players.LocalPlayer.Character.Head:Destroy()

end)
